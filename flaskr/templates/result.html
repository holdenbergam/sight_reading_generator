<html>

    <head>

        <title>result</title>

    </head>
      <link href='https://fonts.googleapis.com/css?family=Spectral' rel='stylesheet'>
    <style>
    h1 {
      font-family: "Spectral";
    }
    div {
      font-family: "Spectral":
    }
    </style>
    <script src="https://cdn.jsdelivr.net/combine/npm/tone@14.7.58,npm/@magenta/music@1.23.1/es6/core.js,npm/focus-visible@5,npm/html-midi-player@1.4.0"></script>




    <body>
        <center><h1>Holden's Auto Sight-Reading Generator</h1><center>

          <div id="bpm"><span id="tempo">120</span> BPM</div>
          <!-- <div id="playing">PLAYING</div> -->
          <!-- <div id="stopped">STOPPED</div> -->
          <div id="keys">Press Space to Start/Stop<br/>
          Press Up/Down to Increase/Decrease Tempo</div>
            <link rel="shortcut icon" type="image/x-icon" href="metronome.ico"/>
            <script
               src="https://code.jquery.com/jquery-3.2.1.min.js"
               integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
               crossorigin="anonymous">
            </script>
            <script>
                $(document).ready(function() {
                    var snd = new Audio('data:audio/wav;base64,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qJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=');
                    var $tempo = $('#tempo');
                    var play = false;
                    $('#playing').hide();

          $(document).on('keydown', function(e) {
          var tempo = parseInt($tempo.text());
          switch (e.which) {
          case 38:
            if (tempo < 225) {
              $tempo.text(tempo + 1);
            }
            break;
          case 40:
            if (tempo > 40) {
              $tempo.text(parseInt($tempo.text()) - 1);
            }
            break;
          case 32: // space
            play = !play;
            $('#playing').toggle(play);
            $('#stopped').toggle(!play);
            if (play) startMetronome();
          }
          });

          function startMetronome() {
          function getInterval() {
            return 1000 / (parseInt($tempo.text()) / 60);
          }
          var interval = getInterval();
          var started = Date.now();
          snd.play();
          setTimeout(step, interval);
          function step() {
            if (play) {
              snd.play();
              var now = Date.now();
              var diff = now - started - interval;
              interval = getInterval();
              started = now;
              setTimeout(step, interval - diff);
            }
          }
          }
          });
          </script>

        <center><midi-player src={{music_name}} sound-font visualizer="#myVisualizer"></midi-player></center>
        <center><midi-visualizer type="piano-roll" id="myVisualizer"></midi-visualizer></center>

        <A HREF='music_output.mid'>
        <EMBED SRC='static/music_output.mid' HIDDEN='true'
        loop='yes' volume='10' autostart='true'>



<!--
<h2>{{time}}</h2>
<h2>{{key}}</h2> -->



<center><embed id='im' src={{image_name}} class="bruh" width="800px" height="2100px" /></center>
<!--<img src="/static/image-1.png" />-->


    </body>
</html>

<!-- import javafx.animation.Animation;
import javafx.animation.KeyFrame;
import javafx.animation.Timeline;
import javafx.application.Application;
import javafx.beans.binding.Bindings;
import javafx.beans.property.DoubleProperty;
import javafx.beans.property.ObjectProperty;
import javafx.beans.property.SimpleDoubleProperty;
import javafx.beans.property.SimpleObjectProperty;
import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.Label;
import javafx.scene.control.Slider;
import javafx.scene.control.ToggleButton;
import javafx.scene.image.Image;
import javafx.scene.layout.HBox;
import javafx.scene.media.AudioClip;
import javafx.scene.text.TextAlignment;
import javafx.stage.Stage;
import javafx.util.Duration;
import javafx.util.StringConverter;

import java.util.Date;

/** Creates a metronome with start/stop and tempo controls */
public class TickTock extends Application {
  private static final double INITIAL_TEMPO = 100;

  public static void main(String[] args) { launch(args); }

  @Override public void start(final Stage stage) {
    stage.setTitle("Metronome");
    stage.setScene(
        new Scene(
            new MetronomeView(new Metronome(INITIAL_TEMPO))
        )
    );
    stage.show();
  }
}

/** Provides a UI to control a metronome which ticks on pulses generated by a tempo in beats per minute. */
class MetronomeView extends HBox {
  private static final double MIN_TEMPO = 40;
  private static final double MAX_TEMPO = 180;

  public MetronomeView(Metronome metronome) {
    super(10);
    getChildren().addAll(
        createStartStopControl(metronome),
        createTempoControl(metronome),
        createTempoReadout(metronome)
    );
    setAlignment(Pos.CENTER);
    setStyle("-fx-background-color: cornsilk; -fx-padding: 10;");
  }

  protected Label createTempoReadout(Metronome metronome) {
    Label label = new Label();
    label.textProperty().bind(Bindings.format("%.0f", metronome.getPulsar().tempoProperty()));
    label.setPrefWidth(25);
    label.setAlignment(Pos.CENTER_RIGHT);

    return label;
  }

  protected Slider createTempoControl(Metronome metronome) {
    final Slider slider = new Slider(MIN_TEMPO, MAX_TEMPO, metronome.getPulsar().getTempo());
    slider.valueProperty().bindBidirectional(metronome.getPulsar().tempoProperty());
    slider.setMajorTickUnit(1);
    slider.setMinorTickCount(0);
    slider.setSnapToTicks(true);

    return slider;
  }

  protected ToggleButton createStartStopControl(final Metronome metronome) {
    final ToggleButton playControl = new ToggleButton("Start");
    playControl.setPrefWidth(60);
    playControl.selectedProperty().addListener(new ChangeListener<Boolean>() {
      @Override
      public void changed(ObservableValue<? extends Boolean> observableValue, Boolean wasSelected, Boolean selected) {
        if (selected) {
          metronome.getPulsar().start();
          playControl.setText("Stop");
        } else {
          metronome.getPulsar().stop();
          playControl.setText("Start");
        }
      }
    });
    return playControl;
  }
}

/** ticks according to a tempo in beats per minute controlled by the associated pulsar. */
class Metronome {
  private final AudioClip tick = new AudioClip("http://www.denhaku.com/r_box/sr16/sr16perc/losticks.wav");
  private final Pulsar pulsar;

  public Metronome(final double initialTempo) {
    // the first time the audioclip is played, there is a delay before you hear it,
    // so play with zero volume now as to make sure it is ready to play when straight away when needed.
    tick.play(0);

    pulsar = new Pulsar(initialTempo, new EventHandler<ActionEvent>() {
      @Override public void handle(ActionEvent actionEvent) {
        tick.play();
      }
    });
  }

  public Pulsar getPulsar() {
    return pulsar;
  }
}

/** handles events according to a tempo in beats per minute. */
class Pulsar {
  private final DoubleProperty tempo    = new SimpleDoubleProperty(100);
  private final Timeline       timeline = new Timeline();

  public Pulsar(final double initialTempo, final EventHandler<ActionEvent> pulseHandler) {
    timeline.setCycleCount(Animation.INDEFINITE);
    timeline.getKeyFrames().setAll(
        new KeyFrame(Duration.ZERO,       pulseHandler),
        new KeyFrame(Duration.minutes(1), null)
    );
    timeline.rateProperty().bind(tempo);

    setTempo(initialTempo);
  }

  public DoubleProperty tempoProperty() {
    return tempo;
  }

  public double getTempo() {
    return tempo.get();
  }

  public void setTempo(double newTempo) {
    tempo.set(newTempo);
  }

  public void start() {
    timeline.play();
  }

  public void stop() {
    timeline.stop();
  }
}
</script> -->
